{% extends 'base.html.twig' %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    <h1>Hello Twig of Piezo !! âœ…</h1>

    <canvas id="myChart" width="700" height="300"></canvas>

    {% set pvalue = []%}
    {% for p in piezo %}
    {% set pvalue = pvalue|merge([p.piezovalue]) %}
    {% endfor %}

    {% set pdate = []%}
    {% for p in piezo %}
    {% set pdate = pdate|merge([p.piezodate]) %}
    {% endfor %}

    {#{{dump(pvalue)}}#}
    {#{{dump(pdate)}}#}
    {#{{dump(piezo)}}#}
    
    <script>
    
    var ctx = document.getElementById('myChart').getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: {{pdate|json_encode|raw}},
            datasets: [{
                label: 'Niveau de la nappe',
                data: {{pvalue|json_encode|raw}},
                backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(255, 206, 86, 0.2)',
                    'rgba(75, 192, 192, 0.2)',
                    'rgba(153, 102, 255, 0.2)',
                    'rgba(255, 159, 64, 0.2)'
                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)',
                    'rgba(75, 192, 192, 1)',
                    'rgba(153, 102, 255, 1)',
                    'rgba(255, 159, 64, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });

</script>

</div>
{% endblock %}
